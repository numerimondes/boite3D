<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
	
	<!-- site title -->
    <title>Free 3D Box Shot Maker!</title>
	<meta name="keywords" content="Free,3D Box,Shot,Maker,Product box,Create,Box Shot Maker">
	<link rel="shortcut icon" href="favicon.ico" />
	
    <!-- Bootstrap -->
    <link href="bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
	<link href="css/bootstrap.cerulean.css" rel="stylesheet">
	
	<!-- our customized stylesheet -->
	<link href="css/style.css" rel="stylesheet">
	
	<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="bower_components/jquery/dist/jquery.min.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
  
	<!-- facebook share button -->
	<div id="fb-root"></div>
	<script>(function(d, s, id) {
	  var js, fjs = d.getElementsByTagName(s)[0];
	  if (d.getElementById(id)) return;
	  js = d.createElement(s); js.id = id;
	  js.src = "//connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v2.5";
	  fjs.parentNode.insertBefore(js, fjs);
	}(document, 'script', 'facebook-jssdk'));</script>
  
    <div class="row">
        <div class="col-md-9 col-xs-12 .col-sm-12 col-centered">
		
			<!-- title -->
			<div class="text-center">
				<h4 style="margin-bottom:-0.5em">(The actually free)</h4>
				<h1>3D Box Shot Maker</h1>
				
				<!-- about -->
				<br />
				<p>
					With this free tool you can easily generate quality 3D box shots for your online products. <br />
					Its absolutely free for any purpose (commercial included), and comes with no watermarks or other nonesense. <br />
					Credits (link to this site) will be appreciated but not mandatory.
					<br /><br />
					For questions feel free to drop an email to <a href="mailto:ronen.ness@gmail.com">ronen.ness@gmail.com</a>.<br />
					Source code can be found <a href="https://github.com/RonenNess/3D-Box-Shot-Maker">here</a>.<br /><br />
					<b>~ Enjoy! ~</b>
				</p>
			</div>
            
			<br />
			
				<!-- facebook share -->
				<div class="fb-share-button" data-href="http://ronenness.github.io/3D-Box-Shot-Maker/" data-layout="button"></div>
				<style>.fb-share-button {top:-5px}</style>
				
				<!-- twitter share -->
				<a href="https://twitter.com/share" class="twitter-share-button" data-via="NessEngine">Tweet</a>
				<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
  
			<!-- control panel -->
			<div>
			
				<!-- options navbar -->
				<ul class="nav nav-tabs">
					<li class="active"><a data-toggle="tab" href="#sectionTextures">Textures</a></li>
					<li><a data-toggle="tab" href="#sectionBackground">Background</a></li>
					<li><a data-toggle="tab" href="#sectionLighting">Lighting</a></li>
					<li><a data-toggle="tab" href="#sectionBox">Box Settings</a></li>
					<li><a data-toggle="tab" href="#sectionCamera">Camera</a></li>
					<li><a data-toggle="tab" href="#sectionSave">Save Image</a></li>
				</ul>
				
				<!-- the control panel tabs -->
				<div class="tab-content">
				
					<!-- Textures menu -->
					<div id="sectionTextures" class="tab-pane option-tab fade in active">
						<h3>Textures</h3>
						<p>Select textures for your product box.</p>
						
						<div class="row-fluid">
							<div class="col-lg-12 col-md-12">
								<div class="cover-container" id="product-textures">
						
									<!-- front cover -->
									<div class="cover-item">
										<label class="control-label">Front cover</label>
										<input id="texture-front" name="texture-front[]" type="file" class="box-texture file file-loading" data-allowed-file-extensions='["bmp", "gif", "jpg", "jpeg", "png"]'>
									</div>
									
									<!-- back cover -->
									<div class="cover-item">
										<label class="control-label">Back cover</label>
										<input id="texture-back" name="texture-side[]" type="file" class="box-texture file file-loading" data-allowed-file-extensions='["bmp", "gif", "jpg", "jpeg", "png"]'>
									</div>
									
									<!-- top cover -->
									<div class="cover-item">
										<label class="control-label">Top</label>
										<input id="texture-top" name="texture-top[]" type="file" class="box-texture file file-loading" data-allowed-file-extensions='["bmp", "gif", "jpg", "jpeg", "png"]'>
									</div>
									
									<!-- left side cover -->
									<div class="cover-item">
										<label class="control-label">Left side</label>
										<input id="texture-left" name="texture-side[]" type="file" class="box-texture file file-loading" data-allowed-file-extensions='["bmp", "gif", "jpg", "jpeg", "png"]'>
									</div>
									
									<!-- right side cover -->
									<div class="cover-item">
										<label class="control-label">Right side</label>
										<input id="texture-right" name="texture-side[]" type="file" class="box-texture file file-loading" data-allowed-file-extensions='["bmp", "gif", "jpg", "jpeg", "png"]'>
									</div>
									
									<script>
										// when texture is loaded re-render product box
										var product_texture_images = {};
										$('.box-texture').change(function (e) {

										   e.preventDefault();
										   var f = e.target.files[0];

										   if (f)
										   {
											   var reader = new FileReader();
											   reader.scope = this;
											   reader.onload = function(evt) {
													var image = document.createElement( 'img' );
													image.src = evt.target.result;
													product_texture_images[this.scope.id] = image;
													renderProductBox();
											   }
											   reader.readAsDataURL(f);
										   }
									   });
									</script>
									
								</div>
							</div>
						</div>
						<div style="clear:both"></div>
					</div>
					
					<!-- Background menu -->
					<div id="sectionBackground" class="tab-pane option-tab fade">
						<h3>Background</h3>
						<p>Select rendering background color.</p>
						<p>Color: <input id="background-color" class="jscolor {onFineChange:'updateBackground(this)'}" value="6A9AAB"></p>
						<button id="transparent-back-button" type="button" style="background:#ccc" class="btn">Transparent</button>
						<button type="button" class="btn" style="background:#9999aa">&nbsp;</button>
						<button type="button" class="btn" style="background:#000000">&nbsp;</button>
						<button type="button" class="btn" style="background:#FFFFFF">&nbsp;</button>
						<button type="button" class="btn" style="background:#888888">&nbsp;</button>
						<button type="button" class="btn" style="background:#CCCCCC">&nbsp;</button>
						<button type="button" class="btn" style="background:#FFF056">&nbsp;</button>
						<button type="button" class="btn" style="background:#C63D0F">&nbsp;</button>
						<button type="button" class="btn" style="background:#3B3738">&nbsp;</button>
						<button type="button" class="btn" style="background:#7E8F7C">&nbsp;</button>
						<button type="button" class="btn" style="background:#005A31">&nbsp;</button>
						<button type="button" class="btn" style="background:#A8CD1B">&nbsp;</button>
						<button type="button" class="btn" style="background:#F3FAB6">&nbsp;</button>
						<button type="button" class="btn" style="background:#6A9AAB">&nbsp;</button>
						<button type="button" class="btn" style="background:#DE1B1B">&nbsp;</button>
						<button type="button" class="btn" style="background:#E9E581">&nbsp;</button>
						<button type="button" class="btn" style="background:#7D1935">&nbsp;</button>
						<button type="button" class="btn" style="background:#4A96AD">&nbsp;</button>						
						<button type="button" class="btn" style="background:#67BCDB">&nbsp;</button>
						<button type="button" class="btn" style="background:#E44424">&nbsp;</button>
						<button type="button" class="btn" style="background:#404040">&nbsp;</button>
						<button type="button" class="btn" style="background:#B71427">&nbsp;</button>
						<button type="button" class="btn" style="background:#118C4E">&nbsp;</button>
						<button type="button" class="btn" style="background:#FF9009">&nbsp;</button>
						<button type="button" class="btn" style="background:#DF3D82">&nbsp;</button>
						
						<script>
						
							// set all color button actions
							$("#sectionBackground").find("button").on("click", function()
							{
								var picker = document.getElementById('background-color');
								picker.jscolor.fromString(this.style.background);
								updateBackground(picker.jscolor);
							});
							
							// special case - the transparent background
							$("#transparent-back-button").on("click", function()
							{
								setBackground("none");
							});
							
							// when the background color picker is used
							function updateBackground(picker)
							{
								setBackground(picker.toHEXString());
							}
							
						</script>
					</div>
					
					<!-- Lighting menu -->
					<div id="sectionLighting" class="tab-pane option-tab fade">
						<h3>Lighting</h3>
						
						<div class="row">
							<!-- ambient light -->
							<div class="col-md-4 col-xs-12">
								<h4>Ambient light</h4>
								<p>Ambient light is the general light of the scene.</p>
								<p>Color: <input id="ambient-color" class="jscolor {onFineChange:'updateAmbientLight(this)'}" value="D6D6D6"></p>
							</div>
							
							<!-- directional light -->
							<div class="col-md-4 col-xs-12">
								<h4>Directional light</h4>
								<p>Directional light is a light that goes from the camera position straight forward, like a flashlight. <br /><br />
								If you want a different source use the camera to set position and lock it via the "lock position" checkbox.</p>
								<p>Directional light: <input id="directional-color" class="jscolor {onFineChange:'updateDirectionalLight(this)'}" value="FFFFFF"></p>
								<label><input id="directional-lock" type="checkbox" value=""> Lock position</label>
							</div>
							
							<!-- point -->
							<div class="col-md-4 col-xs-12">
								<h4>Point light</h4>
								<p>A point light that floats in a position relative to the camera. You can set its position, color and strength to add special effects.</p>
								<p>Color: <input id="point-color" class="jscolor {onFineChange:'updatePointLight()'}" value="000000"></p>
								
								<p>Intensity
									<input style="width:50%; display:inline;" id="point-intensity" type="range" class="form-control" value="1" min="0.5" max="10" step="0.5" onchange="updatePointLight();" >
								</p>
								
								<p>Offset
									<input style="width:20%; display:inline;" id="point-x" type="number" class="form-control" value="150" min="-5000" max="5000" step="50" onchange="updatePointLight();" >
									<input style="width:20%; display:inline;" id="point-y" type="number" class="form-control" value="150" min="-5000" max="5000" step="50" onchange="updatePointLight();" >
									<input style="width:20%; display:inline;" id="point-z" type="number" class="form-control" value="150" min="-5000" max="5000" step="50" onchange="updatePointLight();" >
								</p>
							</div>
						</div>
							
						<script>
						
							// return if the directional light is currently locked
							function isDirectionalLightLocked()
							{
								return document.getElementById("directional-lock").checked;
							}
						
							// when the ambient light color picker is used
							function updateAmbientLight(picker)
							{
								setAmbientLight(picker.toHEXString());
							}
							
							// update point light
							function updatePointLight()
							{
								picker = document.getElementById("point-color").jscolor;
								setPointLight({	x: parseFloat($("#point-x").val()), 
														y: parseFloat($("#point-y").val()), 
														z: parseFloat($("#point-z").val())}, 
														picker.toHEXString(), 
														parseFloat($("#point-intensity").val()));
							}
							
							// when the directional light color picker is used
							function updateDirectionalLight(picker)
							{
								setDirectionalLight(picker.toHEXString());
							}
						</script>
					</div>
					
					<!-- Box settings menu -->
					<div id="sectionBox" class="tab-pane option-tab fade">
						<h3>Box Settings</h3>
						<div class="row">
						
							<!-- material -->
							<div class="col-md-6 col-xs-12">
								<h4>Material</h4>
								<p>Here you can configure the material of the box.</p>
								<p>Shininess
											<input style="width:80%;" id="material-shine" type="range" class="form-control" value="2" min="0.5" max="25" step="0.5" onchange="renderProductBox();" >
								</p>
								<p>Shine color: <input id="specular-color" class="jscolor {onFineChange:'renderProductBox()'}" value="FFFFFF"></p>
							</div>
							
							<!-- size -->
							<div class="col-md-6 col-xs-12">
								<h4>Size</h4>
								<p>Set box size and propotions.</p>
								<p>Box width:
									<input style="width:30%; display:inline;" id="size-x" type="number" class="form-control" value="500" min="50" max="1000" step="10" onchange="renderProductBox();" >
								</p>
								<p>Box height:
									<input style="width:30%; display:inline;" id="size-y" type="number" class="form-control" value="800" min="50" max="1000" step="10" onchange="renderProductBox();" >
								</p>
								<p>Box depth:
									<input style="width:30%; display:inline;" id="size-z" type="number" class="form-control" value="200" min="50" max="1000" step="10" onchange="renderProductBox();" >
								</p>
							</div>
							
						</div>
					</div>
					
					<!-- Camera menu -->
					<div id="sectionCamera" class="tab-pane option-tab fade">
						<h3>Camera</h3>
						<p>Select pre-defined camera position & angle:</p>
						<button class="btn btn-default" onclick="setCamera(-1000, 540, 780);">
							 <img src="img/camera_default.png" width="80" />
						</button>
						<button class="btn btn-default" onclick="setCamera(1000, 540, 780);">
							 <img src="img/camera_default2.png" width="80" />
						</button>
						<button class="btn btn-default" onclick="setCamera(0, 0, 1500);">
							 <img src="img/camera_front.png" width="80" />
						</button>
						<button class="btn btn-default" onclick="setCamera(-1000, -250, 780);">
							 <img src="img/camera_default3.png" width="80" />
						</button>
						<button class="btn btn-default" onclick="setCamera(1000, -250, 780);">
							 <img src="img/camera_default5.png" width="80" />
						</button>
						<button class="btn btn-default" onclick="setCamera(0, 700, 1300);">
							 <img src="img/camera_front2.png" width="80" />
						</button>
						
						<!-- camera position and rotation input -->
						<hr />
						<div class="form-group">
							<label for="camera-position">Position: </label>
							<input class="form-control" id="camera-position" aria-describedby="camera-position" placeholder="0,0,0" style="width:220px; display:inline-block">
							<label for="camera-lookat"> Look at: </label>
							<input class="form-control" id="camera-lookat" aria-describedby="camera-lookat" placeholder="0,0,0" style="width:220px; display:inline-block">
                            <label for="camera-lookat"> Camera FOV: </label>
							<input class="form-control" id="camera-fov" onchange="updateCameraFov(this.value);" aria-describedby="camera-fov" type="number" value="50" min="1" max="360" style="width:220px; display:inline-block">
						</div>
						<script>
						// function to set camera position
						function setCamera(x, y, z)
						{
							controls.center.set(0,0,0);
							camera.position.set(x,y,z);
							controls.update();
						}
						
						// are we setting camera position?
						var settingCameraPosition = false;
						$("#camera-position").focusin(function(){
						  settingCameraPosition = true;
						  $(this).css('background', '#aaffaa');
						});
						$("#camera-position").focusout(function(){
						  settingCameraPosition = false;
						});
						
						// are we setting camera lookat?
						var settingCameraLookat = false;
						$("#camera-lookat").focusin(function(){
						  settingCameraLookat = true;
						  $(this).css('background', '#aaffaa');
						});
						$("#camera-lookat").focusout(function(){
						  settingCameraLookat = false;
						});
						
						// set camera position from input
						$("#camera-position").keyup(function(){
							$(this).css('background', '#ffaaaa');
							var vals = $(this).val().split(',');
							var x = Number(vals[0]);
							var y = Number(vals[1]);
							var z = Number(vals[2]);
							if (!isNaN(x) && !isNaN(y) && !isNaN(z)) {
								camera.position.set(x,y,z);
								controls.update();
								$(this).css('background', '#aaffaa');
							}
						});
						
						// set camera rotation from input
						$("#camera-lookat").keyup(function(){
							$(this).css('background', '#ffaaaa');
							var vals = $(this).val().split(',');
							var x = Number(vals[0]);
							var y = Number(vals[1]);
							var z = Number(vals[2]);
							if (!isNaN(x) && !isNaN(y) && !isNaN(z)) {
								controls.target.set(x,y,z);
								controls.update();
								$(this).css('background', '#aaffaa');
							}
						});
						
						// update camera position and lookat input
						function updateCameraInputs()
						{
							if (!window.camera) {return;}
							var round2 = function(num) {return Math.round((num + Number.EPSILON) * 100) / 100;}
						
							if (!settingCameraPosition) {
								$("#camera-position").val(String(Math.round(camera.position.x)) + ', ' + String(Math.round(camera.position.y)) + ', ' + String(Math.round(camera.position.z))).css('background', 'white');
							}
							
							if (!settingCameraLookat) {
								$("#camera-lookat").val(String(Math.round(controls.target.x)) + ', ' + String(Math.round(controls.target.y)) + ', ' + String(Math.round(controls.target.z))).css('background', 'white');
							}
						}
						
						// auto update camera inputs
						setInterval(updateCameraInputs, 50);
						</script>
					</div>
					
					<!-- Save image menu -->
					<div id="sectionSave" class="tab-pane option-tab fade">
						<h3>Save Image</h3>
						<p>Here you can save your final product image and start using it!<br />
						Click on 'Generate Image' to create your image in the desired size.</p>
						
						<label>Image Width (height is set automatically): &nbsp;</label><input type="number" id="result-img-size-x" value="1400" name="img-size-x" min="200" max="10000"> <br /><br />
						<button class="btn btn-success btn-lg" onclick="toImage();">
							 Generate Image!
						</button>
						<br />
					</div>
					
					<!-- result image div -->
					<div id="result-img-div" style="
					display: none;
					position: fixed;
					left: 50%;
					margin-left: -400px;
					width: 800px;
					height: 800px;
					top: 50px;
					padding: 10px;
					background: #2fa4e7;
					border: black 2px solid;
					border-radius: 15px;">
						<img id="result-img" style="display:block; width:100%; height: auto;">
						<h2 style="color:white">To save image, right click on the image above and select "Save Image As..", or alternatively, <a id="save-img-link" download="image.png" style="color: yellow">click here</a>.</h2>
						<h4 style="color:#ddd">You may use the result image for any personal and / or commercial purpose. No attribution required (although appreciated).</h4>
						<h3><a style="
						position: absolute;
						bottom: 10px;
						left: 15px;
						color: yellow;
						cursor: pointer;" onclick="document.getElementById('result-img-div').style.display='none';">Close Window</a></h3>
					</div>
					
				</div>
			</div>                              		
  
			<!-- the rendering canvas container -->
			<div id="canvas-container" class="canvas-container transparent-background"></div>
			
			<br />
			
			<!-- controls explained -->
			<p>Camera controls: </p>
			<ui>
				<li>Hold down left mouse button to rotate camera.</li>
				<li>Hold down right mouse button to move camera.</li>
				<li>Use middle mouse button (scroller) to zoom in/out.</li>
			</ui>
			<br /><br />
			
			<h4 style="text-align:center">Made by <a href="https://github.com/RonenNess">Ronen Ness</a>, 2016.</h4>
		</div>
    </div>
	
	<!-- google analytics -->
	<script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	  ga('create', 'UA-43062336-3', 'auto');
	  ga('send', 'pageview');

	</script>
	
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
	
	<!-- file-input plugin -->
	<link href="bower_components/bootstrap-fileinput/css/fileinput.min.css" rel="stylesheet">
	<script src="bower_components/bootstrap-fileinput/js/fileinput.min.js"></script>
	
	<!-- Include three.js and orbit controller -->
	<script src="bower_components/three.js/build/three.min.js"></script>
	<script src="bower_components/three.js/examples/js/modifiers/SubdivisionModifier.js"></script>
	<script src="bower_components/three.js/examples/js/controls/OrbitControls.js"></script>
	
	<!-- color picker -->
	<!-- NOTE: this lib included from js and not bower_components because the lib have a bug! once fixed, update this! -->
	<!-- info here: https://github.com/callumacrae/JSColor/issues/1#issuecomment-195410059 -->
	<script src="js/jscolor.min.js"></script>
	
	<!-- our rendering code -->
	<script src="js/renderer.js"></script>
	
	<!-- set file upload defaults -->
	<script>
	// set default bootstrap-fileinput
	$.fn.fileinput.defaults.showUpload = false;
	$.fn.fileinput.defaults.showCancel = false;
	$.fn.fileinput.defaults.showRemove = false;
	$.fn.fileinput.defaults.showRemove = false;

	// init default covers
	product_texture_images = {
		"texture-front": "<img style='height:200px' class='file-preview-image' src='img/default_front.png'>",
		"texture-left": "<img style='height:200px' class='file-preview-image' src='img/default_left.png'>",
		"texture-right": "<img style='height:200px' class='file-preview-image' src='img/default_right.png'>",
		"texture-back": "<img style='height:200px' class='file-preview-image' src='img/default_back.png'>",
		"texture-top": "<img style='height:200px; width:160px;' class='file-preview-image' src='img/default_top.png'>",
	}
	
	// set previews
	$("#texture-front").fileinput({initialPreview: [product_texture_images["texture-front"]],});
	$("#texture-left").fileinput({initialPreview: [product_texture_images["texture-left"]],});
	$("#texture-right").fileinput({initialPreview: [product_texture_images["texture-right"]],});
	$("#texture-back").fileinput({initialPreview: [product_texture_images["texture-back"]],});
	$("#texture-top").fileinput({initialPreview: [product_texture_images["texture-top"]],});

	// convert covers to image instances
	for (var key in product_texture_images)
	{
		product_texture_images[key] = $(product_texture_images[key])[0];
	}
	
	</script>
	<style>
	.close.fileinput-remove
	{
		display: none;
	}
	.file-preview-image
	{
		max-width: 100%;
	}
	.file-caption-name
	{
		white-space: nowrap;
		overflow: hidden;
		text-overflow: ellipsis;
		max-width: 100px;
	}
	</style>
	
  </body>
</html>